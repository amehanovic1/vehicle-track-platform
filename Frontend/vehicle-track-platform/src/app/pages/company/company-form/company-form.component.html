<section class="company-form-section">
  <div class="form-container">
    <header class="form-header">
      <h2 class="form-title">{{ isEditMode ? 'Edit Company' : 'Add Company' }}</h2>
      <div class="form-divider"></div>
    </header>

    <form (ngSubmit)="saveCompany()" class="company-form" #companyForm="ngForm">

      <div *ngIf="isEditMode; else createTypeBlock" class="form-section company-details-card">
        <h3 class="section-title">Company Details</h3>
        <div class="company-details-content">
          <div class="detail-item">
            <span class="detail-icon">
              <i class="fas fa-building"></i>
            </span>
            <div>
              <div class="detail-label">Company Type</div>
              <div class="detail-value">
                {{ getCompanyTypeName(company.companyType) }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <ng-template #createTypeBlock>
        <div class="input-group">
          <label for="companyType" class="input-label">Company Type</label>
          <select [(ngModel)]="company.companyType" name="companyType" id="companyType"
            class="form-input" required (change)="onInputChange()">
            <option [ngValue]="null" disabled selected>Select company type</option>
            <option [ngValue]="CompanyType.INSURANCE_COMPANY">Insurance Company</option>
            <option [ngValue]="CompanyType.SERVICE_PROVIDER">Service Provider</option>
            <option [ngValue]="CompanyType.GAS_STATION">Gas Station</option>
          </select>

        </div>
      </ng-template>

      <div class="form-section">
        <h3 class="section-title">Company Information</h3>
        <div class="form-grid">
          <div class="input-group">
            <label for="name" class="input-label">Name</label>
            <input [(ngModel)]="company.name" name="name" id="name"
                   class="form-input" required placeholder="Enter company name" (input)="onInputChange()" />
          </div>

          <div class="input-group">
            <label for="address" class="input-label">Address</label>
            <input [(ngModel)]="company.address" name="address" id="address"
                   class="form-input" required placeholder="Enter address" (input)="onInputChange()" />
          </div>

          <div class="input-group">
            <label for="phoneNumber" class="input-label">Phone Number</label>
            <input [(ngModel)]="company.phoneNumber" name="phoneNumber" id="phoneNumber"
                   class="form-input" required placeholder="Enter phone number" (input)="onInputChange()" />
          </div>

          <div class="input-group">
            <label for="email" class="input-label">Email</label>
            <input [(ngModel)]="company.email" name="email" id="email"
                   class="form-input" type="email" placeholder="Enter email" (input)="onInputChange()" />
          </div>

          <div class="input-group">
            <label for="contactPerson" class="input-label">Contact Person</label>
            <input [(ngModel)]="company.contactPerson" name="contactPerson" id="contactPerson"
                   class="form-input" required placeholder="Enter contact person" (input)="onInputChange()" />
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary"
                [disabled]="!isFormValid() || (isEditMode && !hasChanges)">
          {{ isEditMode ? 'Update Company' : 'Create Company' }}
        </button>
        <button type="button" class="btn btn-outline" (click)="router.navigate(['/companies'])">
          Cancel
        </button>
      </div>
    </form>
  </div>
</section>